# Coding Standards

За основу взяты стандарты Symfony, включающие в себя [PSR-0](http://www.php-fig.org/psr/psr-0/), 
[PSR-1](http://www.php-fig.org/psr/psr-1/) и [PSR-2](http://www.php-fig.org/psr/psr-2/)

## PSR-0

PSR-0 содержит обязательные требования, которые необходимо соблюдать для поддержания функциональной совместимости автозагрузчика.

* Полностью сформированное пространство имен и класс должны иметь следующую структуру `\<Vendor Name>\(<Namespace>\)*<Class Name>`
* Каждое пространство имен должно иметь пространство имен верхнего уровня (`Vendor Name`, в нашем случае `Rutorika`).
* Каждое пространство имен может содержать столько вложенных пространств имен, сколько ему необходимо.
* Каждый разделитель пространств имен преобразуется в `DIRECTORY_SEPARATOR` при загрузке из файловой системы.
* Каждый символ `_` в *имени класса* преобразуется в `DIRECTORY_SEPARATOR`. Символ `_` не имеет особого значения в *пространстве имен*.
* Полностью сформированное пространство имен и класс дополняются `.php` при загрузке из файловой системы.
* Буквы в именах поставщиков (vendors), пространствах имен и именах классов могут в любой комбинации строчных и прописных букв.

### Примеры

* `\Doctrine\Common\IsolatedClassLoader` => `/path/to/project/lib/vendor/Doctrine/Common/IsolatedClassLoader.php`
* `\Symfony\Core\Request` => `/path/to/project/lib/vendor/Symfony/Core/Request.php`
* `\Zend\Acl` => `/path/to/project/lib/vendor/Zend/Acl.php`
* `\Zend\Mail\Message` => `/path/to/project/lib/vendor/Zend/Mail/Message.php`

### Подчеркивания в Пространствах имен и Именах классов

`\namespace\package\Class_Name` => `/path/to/project/lib/vendor/namespace/package/Class/Name.php`
`\namespace\package_name\Class_Name` => `/path/to/project/lib/vendor/namespace/package_name/Class/Name.php`

## PSR-1 Основной стандарт написания кода

Этот раздел стандартов включает в себя стандарт кода, необходимый для обеспечения высокого уровня технической взаимодействия между общим PHP кодом.

Ключевые слова "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" в этом документе должны быть истолкованы как описано в [RFC 2119](http://www.ietf.org/rfc/rfc2119.txt).

> "ДОЛЖЕН"/"НЕОБХОДИМО" (MUST), а также термины ТРЕБУЕТСЯ (REQUIRED) и НУЖНО (SHALL) используется для требований, которые являются абсолютно необходимыми в данной спецификации.

> "НЕДОПУТИМО" (MUST NOT) и "НЕ ПОЗВОЛЯЕТСЯ" (SHALL NOT) означают абсолютный запрет в рамках спецификации.

> "СЛЕДУЕТ" (SHOULD) и "РЕКОМЕНДУЕТСЯ" (RECOMMENDED) используется для обозначения требований, от выполнения которых можно отказаться при наличии разумных причин. Однако при таком отказе следует помнить о возможных проблемах в результате отказа и принимать взвешенное решение.

> "НЕ СЛЕДУЕТ" (SHOULD NOT) и "НЕ РЕКОМЕНДУЕТСЯ" (NOT RECOMMENDED) используются применительно к особенностям или функциям, которые допустимы и могут быть полезными, но могут вызывать проблемы. При реализации таких опций следует учитывать возможность возникновения проблем и принимать взвешенное решение.

> "ВОЗМОЖНО" (MAY) и "НЕОБЯЗАТЕЛЬНЫЙ" (OPTIONAL) обозначают элементы, реализация которых является необязательной. Одни разработчики могут включать такие опции в свою продукцию для расширения возможностей, а другие -опускать в целях упрощения. Реализация, не включающая ту или иную опцию, должна быть готова к работе с реализациями, которые используют эту опцию (возможно совместная работа будет обеспечиваться за счет некоторого ущерба функциональности). Включающие опцию реализации должны быть готовы (естественно, без использования такой опции) к взаимодействию с реализациями, которые такую опцию не поддерживают.

### Содержание

* Файлы ДОЛЖНЫ использовать только `<?php` и `<?=` теги.
* Файлы ДОЛЖНЫ использовать только UTF-8 без BOM для PHP кода.
* Файлам СЛЕДУЕТ либо объявлять знаки (классы, функции, константы, и т.д.) или оказывать побочный эффект (например, генерировать вывод, изменять .ini настройки, и т.д.) но НЕ СЛЕДУЕТ делать и то и другое.
* Пространства имен и классы ДОЛЖНЫ следовать PSR-0.
* Имена классов ДОЛЖНЫ быть объявлены используя `StudlyCaps`.
* Константы класса ДОЛЖНЫ быть объявлены в верхнем регистре с подчеркиванием в качестве разделителей.
* Имена методов ДОЛЖНЫ быть объявлены используя `camelCase`.

### Файлы

#### PHP Теги

PHP код ДОЛЖЕН использовать длинные <?php ?> теги или короткие-выводящие <?= ?> теги; другие варианты тегов НЕ ДОЛЖНЫ использоваться.

#### Кодировка символов

PHP код ДОЛЖЕН использовать только UTF-8 без BOM.

#### Побочные эффекты

Файлу СЛЕДУЕТ объявлять знаки (классы, функции, константы, и т.д.), и не оказывать побочный эффект, или ему СЛЕДУЕТ выполнять логику с побочным эффектом, но НЕ СЛЕДУЕТ делать и то и другое.

Фраза "побочны эффекты" означает выполнение логики непосредственно не связанной с объявлением классов, функций, констант и т.д., просто от включения файла.

"Побочные эффекты" включают, но не ограничены: генерацией вывода, явным использованием require или include, подключением к внешним сервисам, изменениям настроек ini, выбрасыванием ошибок или исключений, изменением глобальных или статичных переменных, чтением или записью в файл, и так далее.

Ниже приведен пример файла с одновременно объявляющий знаки и оказывающий побочные эффекты; т.е., пример того, что следует избегать:

```php
// побочное действие: изменение настроек ini
ini_set('error_reporting', E_ALL);

// побочное действие: подключение файла
include "file.php";

// побочное действие: генерация вывода
echo "<html>\n";

// объявление
function foo()
{
    // тело функции
}
```

### Названия пространств имен и классов

Пространства имен и классы должны следовать стандарту PSR-0.

Это значит, что каждый класс должен быть в отдельном файле, и внутри пространства имен хотя бы на один уровень, с верхнем уровнем - уровенем поставщика (vendor).

Имена кассов ДОЛЖНЫ быть названы используя формат StudlyCaps (каждое слово с большой буквы).

Код написанный на PHP 5.3 и старше ДОЛЖЕН использовать формальные пространства имен.

Например:

```php
namespace Vendor\Model;

class Foo
{
}
```

### Константы, свойства и методы классов


Термин класс включает всё: классы, интерфейсы и traits (примеси).

#### Константы

Константы классов ДОЛЖНЫ быть названы используя только большие буквы и нижнее подчеркивание для разделения слов. Пример:

```php
namespace Vendor\Model;

class Foo
{
    const VERSION = '1.0';
    const DATE_APPROVED = '2012-06-01';
}
```

#### Свойства

Стандарт намеренно избегает любых рекомендаций в отношении использования `$StudlyCaps`, `$camelCase` или `$under_score` в именах свойств.

Любое соглашение об именовани НУЖНО применять постоянно в рамках какого-то разумного объема. Таким объемом может быть уровень поставщика, пакета, класса или метода.

#### Методы

Методы ДОЛЖНЫ быть названы используя `camelCase()`.
